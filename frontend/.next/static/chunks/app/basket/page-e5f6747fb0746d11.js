(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{2063:(e,t,a)=>{Promise.resolve().then(a.bind(a,8440))},8440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(7437),c=a(2265),n=a(7138),i=a(6463);function r(){let[e,t]=(0,c.useState)(null);async function a(e){await fetch("".concat("http://127.0.0.1:8000","/set_basket/").concat(e.target.value),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});let a=await fetch("".concat("http://127.0.0.1:8000","/get_basket"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});200==a.status&&t(await a.json())}async function r(e){await fetch("".concat("http://127.0.0.1:8000","/del_basket/").concat(e.target.value),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});let a=await fetch("".concat("http://127.0.0.1:8000","/get_basket"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});200==a.status&&t(await a.json())}async function l(){let e=localStorage.getItem("token");await fetch("".concat("http://127.0.0.1:8000","/del_basket"),{headers:{Authorization:"Bearer ".concat(e)}}),location.reload()}(0,i.useRouter)(),(0,c.useEffect)(()=>{(async function(){let e=localStorage.getItem("token"),a=await fetch("".concat("http://127.0.0.1:8000","/get_basket"),{headers:{Authorization:"Bearer ".concat(e)}});200==a.status&&t(await a.json())})()},[]);let o=0,u=0;return e&&(e.map(e=>+(e.quantity*e.Price)).map(e=>u+=e),e.map(e=>+Number(e.quantity)).map(e=>o+=e)),console.log(e),(0,s.jsxs)("div",{className:"contener_detal",children:[" ",e&&(0,s.jsxs)("div",{className:"baket_naw",children:[(0,s.jsx)("div",{className:"exit",children:(0,s.jsx)(n.default,{href:"/",children:(0,s.jsx)("img",{src:"../img/exit.png",alt:"",width:"24",height:"24"})})}),(0,s.jsxs)("div",{className:"baket",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"Корзина"}),(0,s.jsx)("p",{className:"baket_button",type:"submit",onClick:l,children:" Очистить"})]}),(0,s.jsxs)("div",{className:"contener_flex",children:[(0,s.jsxs)("p",{children:[u," Руб"]}),(0,s.jsxs)(n.default,{href:"../basket",children:[(0,s.jsx)("p",{className:"sum_p",children:o}),(0,s.jsx)("img",{className:"baket_img",src:"../img/basket.png",alt:"",width:"24",height:"24"})]})]})]})]}),(0,s.jsx)("div",{className:"padding_2vh ",children:e&&e.map(e=>0!=e.quantity&&(0,s.jsxs)("div",{className:"detail",children:[(0,s.jsx)("h1",{children:e.Manufacturer},e.key+"Manufacturer"),(0,s.jsx)("p",{children:e.Model},e.key+"Model"),(0,s.jsx)("p",{children:e.Product_name},e.key+"Product_name"),(0,s.jsxs)("p",{children:[e.Price," Руб"]},e.ke+"Price"),(0,s.jsx)(n.default,{href:e.Image,children:(0,s.jsx)("img",{src:e.Image,width:"150",height:"200"})},e.key+"link"),(0,s.jsxs)("div",{className:"contener_flex widh_35",children:[(0,s.jsx)("button",{className:"counter__minus",type:"button",value:e.key,onClick:r,children:"-"}),(0,s.jsxs)("div",{className:"counter__p",children:[" ",(0,s.jsx)("p",{children:e.quantity})]}),(0,s.jsx)("button",{type:"button",value:e.key,className:"counter__plus",onClick:a,children:"+"})]},e+"1"),(0,s.jsx)("p",{children:"Цена-"+e.quantity*Number(e.Price)}),(0,s.jsx)("div",{className:"contener_flex widh_35",children:(0,s.jsx)("button",{type:"submit",className:"lf--submit",children:" Купить"},e.key+"button")},e+"2")]},e.key))})]})}},6463:(e,t,a)=>{"use strict";var s=a(1169);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[138,130,215,744],()=>t(2063)),_N_E=e.O()}]);